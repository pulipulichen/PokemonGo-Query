<!DOCTYPE html>
<html>
  <head>
    <title>out-of-ranking-ids</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<style>
	textarea {
		display: block;
		width: 100%;
    height: 20vh;
    min-height: 10em;
	}
	</style>
  </head>
  <body>
    <h1>out-of-ranking-ids
    <a href="https://docs.google.com/spreadsheets/d/1t87-wOouod1RPUoBDsF4HN1uYsLsQyUm8Hxh1Xfxzyw/edit#gid=242478575" target="_blank">(搜尋指令)</a></h1>
    <textarea id="input"></textarea>
    <table width="100%">
      <tbody>
        <tr>
          <th>不在排名中，非0%可刪除 (近距離)</th>
          <th>不在排名中，非0%可刪除 (無視距離)</th>
        </tr>
        <tr>
          <td><textarea id="output" onfocus="this.select()"></textarea></td>
          <td><textarea id="outputNoDist" onfocus="this.select()"></textarea></td>
        </tr>
        
        <tr>
          <th>排名中，檢查非PvP即可加註交換</th>
          <th>排名中，不需交換，檢查非PvP即可刪除 (近距離)</th>
        </tr>
        <tr>
          <td><textarea id="output2tag" onfocus="this.select()"></textarea></td>
          <td><textarea id="output2" onfocus="this.select()"></textarea></td>
        </tr>
      </tbody>
    </table>
    
    
    
    
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script>
	$('#input').change(() => {
		let ids = $('#input').val().trim().split('\n').join(',').split(',').filter( (value, index, self) => { 
			return self.indexOf(value) === index;
		});
    
    let query = ids.join('&!')
    let queryNoDist = "!4*&!交換&!e&!c&!U&!G&!暗影&!淨化&!傳說的寶可夢&!特殊&!幻&!異色&!亮晶晶&!" + query
		query = "!4*&距離0-10&!交換&!e&!c&!U&!G&!暗影&!淨化&!傳說的寶可夢&!特殊&!幻&!異色&!亮晶晶&!" + query
		//console.log(query)
		$('#output').val(query)
    $('#outputNoDist').val(query)
    
    let query2 = ids.join(',')
    let query2tag = "!4*&!交換&!e&!c&!暗影&!淨化&!傳說的寶可夢&!特殊&!幻&!異色&!亮晶晶&" + query2
    query2 = "!e&!c&" + query2
		$('#output2').val(query2)
    $('#output2tag').val(query2tag)
	})
	</script>
  </body>
</html>
